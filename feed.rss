<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content"><channel><title>Henrik Forsberg - iOS Developer</title><description>A description of PublishWebsite</description><link>https://forsberg.dev</link><language>en</language><lastBuildDate>Mon, 2 Aug 2021 21:24:43 +0200</lastBuildDate><pubDate>Mon, 2 Aug 2021 21:24:43 +0200</pubDate><ttl>250</ttl><atom:link href="https://forsberg.dev/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://forsberg.dev/blog/first</guid><title>Creating a Static Website Using Swift and Publish</title><description>Are you an iOS or MacOS developer? Is Swift your favorite language? What if you could use Swift to build your website as well? With John Sundell's Publish framework, you can! In this article, I'll help you get started.</description><link>https://forsberg.dev/blog/first</link><pubDate>Thu, 1 Jul 2021 00:00:00 +0200</pubDate><content:encoded><![CDATA[<h1>Creating a Static Website Using Swift and Publish</h1><hr><p>I have always felt that I needed a site or some place on the web where I can show off whatever it is I am or have been working on to anyone who might be interested. Since I'm not much of a talker, I would like it if I could let my work speak for me. As an iOS developer I mostly work in <a href="https://swift.org">Swift</a> which was why - when I heard about <a href="https://www.swiftbysundell.com">John Sundell's</a> open source framework <a href="https://github.com/JohnSundell/Publish">Publish</a> for using Swift to generate static websites - I just had to check it out. In this post I will try to recapitulate what I learned by going through some of the most common steps needed to create a new static website with Swift and Publish.</p><h2>Prerequisites</h2><p>Most of what I mention in this article should be pretty straight forward but of course it doesn't hurt if you have some knowledge of the following:</p><ul><li>Swift</li><li>Git and GitHub</li><li>Terminal</li></ul><p>I am also going to assume that you have Swift and</p><p>I used installed on your machine.</p><h2>Getting Started</h2><p>Before we can start building our site there are a few steps we need to get out of the way. We need to:</p><ul><li>Install Publish</li><li>Create a new Publish project</li></ul><p>So let's get started!</p><h3>Install Publish</h3><p>Installing Publish is easy. Just open up Terminal, navigate to a location where you want to place the install folder and run the following commands:</p><pre><code class="language-no-highlight">$ git clone https://github.com/JohnSundell/Publish.git
$ cd Publish
$ make
</code></pre><p>You can find the original instructions for installing <a href="https://github.com/JohnSundell/Publish#quick-start">here</a>.</p><h3>Create a new website project</h3><p>Creating a new project with Publish is as straight forward as creating a new folder and running <code>publish new</code> when inside that folder:</p><pre><code class="language-no-highlight">$ mkdir publish_website
$ cd publish_website
$ publish new
</code></pre><h2>Open Publish project</h2><p>Finally, we are ready to open up the project in Xcode to take a look at what we just created. To do just that, simply run:</p><pre><code class="language-no-highlight">$ open Package.swift
</code></pre><h3>Project file hierarchy</h3><p>In Xcode, we see that the <code>publish new</code> command generated a number of folders and files for us:</p><pre><code class="language-no-highlight">publish_website
├── Package.swift
├── Content
│   ├── index.md
│   └── posts
│       ├── first-post.md
│       └── index.md
├── Resources
└── Sources
    └── PublishWebsite
        └── main.swift
</code></pre><h4>Package.swift</h4><p>Since each Publish website is defined as a Swift package, it needs a <code>Package.swift</code> manifest file to describe its targets and dependencies. For example, this is where we would add any and all plugins we would want to add to the website.</p><h4>Content</h4><p>The Content folder contains all our Markdown files that make up the content of our site.</p><h4>Resources</h4><p>This is where we will add our media files (images, videos) and CSS.</p><h4>Sources</h4><p>Contains <code>main.swift</code> which holds the configuration for the website.</p><h2>Running it Locally</h2><p>When developing your site, you probably want to be able to run it several times to make sure it behaves and looks the way you want it to. For this, Publish lets you run a local web server for building and running your site with this command:</p><pre><code class="language-no-highlight">$ publish run
</code></pre><p>This builds and runs our website on a local web server at <code>http://localhost:8000</code>. While we carry on development of our site, we can just leave this running in a Terminal tab. When we have made some changes to our site that we want to see how it looks, we can just hit <code>cmd + r</code> in Xcode to regenerate the site's content and immediately see the new changes in our browser of choice.</p><p>⚠️ Note: I have found, however, that changes made to my CSS sometimes get cached (at least when using Safari) so instead of simply Reloading the page (cmd + r) I would need to Reload the page from origin (Alt + cmd + r).</p><p>After running <code>publish run</code> there will also be a folder called <code>Output</code>, where the generated static site will reside. This is the folder that should be published when the site is deployed.</p><h2>Adding a section</h2><p>Simply add another case in</p><pre><code><span class="keyword">enum</span> SectionID: <span class="type">String</span>, <span class="type">WebsiteSectionID</span> {}
</code></pre><h2>Creating a Page</h2><h2>Creating an Item</h2><h2>Creating a custom Publish theme</h2><p>https://www.russellgordon.ca/tutorials/creating-a-custom-theme-using-publish/</p><h2>Adding Images</h2><p>By default only files within the Resources folder gets copied. That means, if we want a folder for storing our images we need to add it. To add a folder for images inside the Resources folder, add a PublishingStep called copyFiles and set its includingFolder parameter to true.</p><pre><code>.<span class="call">copyFiles</span>(at: <span class="type">Path</span>(<span class="string">"Resources/ForsbergTheme/images"</span>),
    to: <span class="keyword">nil</span>,
    includingFolder: <span class="keyword">true</span>)
</code></pre><p>Now we can access images from our Markdown with a path like this:</p><pre><code class="language-no-highlight">![alt text](/images/&lt;your_image_name&gt;)
</code></pre><h2>Adding a plugin</h2><p>When looking at <code>Package.swift</code>, I mentioned that we can add plugins to Publish. Let's add John Sundell's plugin for syntax highlighting - Splash - to the project.</p><h2>Deploying to GitHub Pages</h2><h4>Create a GitHub Repository</h4><p>To be able to deploy our site to GitHub Pages we first need a repository to target. I'll simply go ahead and assume that you know how to create a new repository on GitHub. If not, have a gander at the <a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">GitHub documentation for how to create a repo</a>.</p><p>I want my site to be accessed directly at <code>&lt;username&gt;.github.io</code> (Obviously, <code>&lt;username&gt;</code> should be replaced with whatever username you have on GitHub) so I'll simply create a repo with that name. If you need something else, check out the <a href="https://pages.github.com">GitHub Pages site</a> to learn about what other options there are.</p><p>By doing this, we will have two repositories for the site; one containing the source code and one containing the generated site. We build the site and push the changes to the source repository and when we feel good and ready we publish to the other. Nice and clean.</p><h4>Add a publishing step for deployment</h4><p>Now that we have a repo ready we need to tell Publish where to deploy. In <code>main.swift</code>, add a publishing step for deployment:</p><pre><code>.<span class="call">deploy</span>(using: .<span class="call">gitHub</span>(<span class="string">"readyruncode/readyruncode.github.io"</span>, useSSH: <span class="keyword">false</span>))
</code></pre><h4>Deploying</h4><p>Then, whenever we feel like our website simply cannot get more polished or just want to throw it out there, we go to the root directory of the source repo in Terminal and type the following:</p><pre><code class="language-no-highlight">$ publish deploy
</code></pre><p>The Publish framework will then look at whatever we entered as target for our publishing step for deployment above and try to push the generated site contents there. If all goes well we can visit our freshly generated website within seconds.</p><h2>Conclusions</h2><h2>Where to go from here?</h2><ul><li>During the time of writing this post, John Sundell made some significant API changes to the Plot framework used by Publish, making it more SwiftUI-like. However, he claims these changes are 100% backwards compatible so we should be good to digest the new stuff if and when we feel like it. Worth mentioning, though.</li></ul>]]></content:encoded></item></channel></rss>